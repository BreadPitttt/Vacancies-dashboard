<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>General Vacancy Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-store" />
  <link rel="stylesheet" href="style.css?v=2025-09-26-stable4" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <h1>General Vacancy Dashboard</h1>
      <div class="meta">
        <span id="health-pill" class="pill">Health: Unknown</span>
        <span id="last-updated" class="muted">Last updated: —</span>
        <span id="total-listings" class="muted">Listings: —</span>
      </div>
    </div>
    <div class="actions">
      <button id="btn-missing" class="btn primary" type="button">Submit missing</button>
    </div>
  </header>

  <main class="container">
    <div class="tabs">
      <div class="tab active" data-tab="open">Open</div>
      <div class="tab" data-tab="applied">Applied</div>
      <div class="tab" data-tab="other">Other</div>
    </div>

    <section id="panel-open" class="panel active">
      <div id="open-root" class="cards-grid"></div>
    </section>
    <section id="panel-applied" class="panel">
      <div id="applied-root" class="cards-grid"></div>
    </section>
    <section id="panel-other" class="panel">
      <div id="other-root" class="cards-grid"></div>
    </section>
  </main>

  <!-- Missing modal -->
  <div id="missing-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-labelledby="missing-title">
    <div class="modal-body">
      <div class="modal-head">
        <button type="button" class="close-top" data-close aria-label="Close"></button>
        <h3 id="missing-title" class="hidden">Submit Missing Vacancy</h3>
      </div>
      <form id="missingForm" class="form" novalidate>
        <label>Post name</label>
        <input id="missingTitle" placeholder="e.g., EMRS Non‑teaching 2025" required />
        <div class="grid2">
          <div>
            <label>Notification link (required)</label>
            <input id="missingUrl" placeholder="PDF or notice URL" required />
          </div>
          <div>
            <label>Official website (optional)</label>
            <input id="missingSite" placeholder="https://...gov.in/ or portal home" />
          </div>
        </div>
        <div class="grid2">
          <div>
            <label>Number of posts (optional)</label>
            <input id="missingPosts" placeholder="e.g., 420" />
          </div>
          <div>
            <label>Last date (DD-MM-YYYY or N/A)</label>
            <input id="missingLastDate" placeholder="27-10-2025 or N/A" />
          </div>
        </div>
        <label>Note (optional)</label>
        <textarea id="missingNote" rows="3" placeholder="Any extra info"></textarea>
        <div class="modal-actions">
          <div class="slot-left"></div>
          <div class="slot-middle">
            <button type="submit" class="btn primary">Submit</button>
          </div>
          <div class="slot-right"></div>
        </div>
      </form>
    </div>
  </div>

  <!-- Report modal -->
  <div id="report-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-labelledby="report-title">
    <div class="modal-body">
      <div class="modal-head">
        <button type="button" class="close-top" data-close aria-label="Close"></button>
        <h3 id="report-title" class="hidden">Report listing</h3>
      </div>
      <form id="reportForm" class="form" novalidate>
        <input type="hidden" id="reportListingId" />
        <input type="hidden" id="reportListingTitle" />
        <input type="hidden" id="reportListingUrl" />
        <label>Reason</label>
        <select id="reportReason" required>
          <option value="" disabled selected>Select reason…</option>
          <option value="not_vacancy">Not a vacancy (result/admit/exam date)</option>
          <option value="last_date_over">Last date over</option>
          <option value="wrong_last_date">Wrong last date</option>
          <option value="wrong_eligibility">Wrong eligibility</option>
          <option value="duplicate">Duplicate / Already listed</option>
          <option value="bad_link">Broken / Unofficial link</option>
        </select>
        <div class="grid2">
          <div>
            <label>Evidence URL (optional)</label>
            <input id="reportEvidenceUrl" placeholder="Official page" />
          </div>
          <div>
            <label>Number of posts (optional)</label>
            <input id="reportPosts" placeholder="e.g., 420" />
          </div>
        </div>
        <div class="grid2">
          <div>
            <label>Correct last date (optional)</label>
            <input id="reportLastDate" placeholder="dd/mm/yyyy" />
          </div>
          <div>
            <label>Correct eligibility (optional)</label>
            <input id="reportEligibility" placeholder="e.g., Any graduate" />
          </div>
        </div>
        <div>
          <label>Note (optional)</label>
          <input id="reportNote" placeholder="Tell more if needed" />
        </div>
        <div class="modal-actions">
          <div class="slot-left"></div>
          <div class="slot-middle">
            <button type="submit" class="btn primary">Report</button>
          </div>
          <div class="slot-right"></div>
        </div>
      </form>
    </div>
  </div>

  <div id="confirm"><div class="box">
    <div id="confirm-text">Confirm?</div>
    <div class="row">
      <button id="confirm-cancel" class="btn ghost">Cancel</button>
      <button id="confirm-ok" class="btn primary">OK</button>
    </div>
  </div></div>
  <div id="snackbar">
    <span id="snack-text">Saved</span>
    <span class="count" id="snack-count">(10s)</span>
    <button id="snack-undo" class="btn ghost">Undo</button>
  </div>
  <div id="toast"></div>

  <script src="app.js?v=2025-09-26-stable5" defer></script>
</body>
</html>
